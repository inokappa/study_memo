# aws-sdk を使ってインスタンスを起動したり停止したりする

## 概要

 * knife ec2 の勉強
 * コードを書くモチベーション（目的が無ければ書かない、上達もしない...のではないか？）

## 準備

### aws-sdk for ruby のインストール

gem で一発でインストール。

```
sudo gem install aws-sdk --no-ri --no-rdoc -V
```

### やっておくべきこと

`access_key` と　`secret_access_key` と対象となるリージョンについて確認して以下のように作成する。

```
access_key_id: ${YOUR_ACCESS_KEY}
secret_access_key: ${YOUR_SECRET_KEY}
```

## 実際にやってみる

### インスタンス一覧を取得


```
# -*- coding: utf-8 -*-

require 'rubygems'
require 'yaml'
require 'aws-sdk'

config = YAML.load(File.read("config.yml"))
AWS.config(config)

ec2 = AWS::EC2.new(
  :ec2_endpoint => 'ec2.ap-northeast-1.amazonaws.com',
)

ec2.instance.each do |instance|
  put instance.id
end

```

### インスタンスの起動

### インスタンスの停止


## まとめ

## 参考
